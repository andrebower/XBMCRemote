{
  "name": "jrpc-schema",
  "version": "0.0.3",
  "description": "Parses a json schema into a simple usable api object",
  "main": "main.js",
  "scripts": {
    "test": "mocha --reporter spec"
  },
  "keywords": [
    "json",
    "rpc",
    "json-rpc",
    "api",
    "schema"
  ],
  "author": {
    "name": "Florian Albertz"
  },
  "license": "BSD-2-Clause",
  "devDependencies": {
    "must": "~0.10.0",
    "mocha": "~1.14.0"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/Paulavery/jrpc-schema.git"
  },
  "dependencies": {
    "JSV": "~4.0.2"
  },
  "readme": "Parse JSON-Schemas with support for JSON-RPC Service Descriptors\r\n================================================================\r\n\r\nThis module allows you, to parse a json schema and then provides you an object to validate a javascript value against any part of it.\r\nIn addition it supplies a simple way to call JSON-RPC methods described by this spec:\r\nhttp://www.simple-is-better.org/json-rpc/jsonrpc20-schema-service-descriptor.html\r\n\r\nThis module currently follows the 3rd version of the json-schema draft found here:\r\nhttp://tools.ietf.org/html/draft-zyp-json-schema-03\r\n\r\nUsage\r\n-----\r\n\r\n`var jrpc = require('jrpc-schema');`\r\n\r\n### .handleResponse([source], json) ###\r\nThe module does not provide a channel to communicate with any service you might want to query.\r\nTherefore, you should pass any json your source sends you into the modules `.handleResponse()` method.\r\nThe optional `connection` parameter can be used, if json data from multiple sources is to be handled. Using `.onNotification()` or `.onId()` we can then attach to requests from specific sources only.\r\n\r\nThrows a `TypeError` if `json` is not a valid json string.\r\n\r\n### .onNotification(method, [source], handler)###\r\nIn case the server might send notifications to our client (e.g. via a websocket connection) we can attach a handler to specific notifications.\r\n`method` should be a string containing a method name and if source is supplied, only notifications send from that source are handled. The `handler` function gets passed the notifications parameters as its only argument.\r\n\r\n### .onId(id, [source], handler) ###\r\nVery similar to `.onNotification()` except that it attaches to all responses sent with a specific id. Useful in conjunction with `.methodToJson()`.\r\n\r\n### .methodToJson(method, params, [id])###\r\nSimply takes a method name, a params object / array and an optional id and returns a json-rpc request string valid according to v2 of the specification:\r\nhttp://www.jsonrpc.org/specification\r\n\r\nThrows `TypeErrors` if any parameter does not adhere to the spec.\r\n\r\n### .parse(schema, handler) ###\r\nThis function is probably the most useful, as it parses a supplied json schema and generates validator functions for all subschemas within it.\r\nIn addition, it generates wrappers for each json-rpc method it finds.\r\n\r\n`schema` has to be a valid json-schema (either as a string or a javascript object) and `handler` should be a function which takes a json string and sends it to the server.\r\n\r\n`.parse()` then returns either a validator function for the entire schema or, if the entire schema is of type `method`, a JSON-RPC wrapper for a specific method.\r\n\r\n#### Validator Functions ####\r\nA validator function is a function, which takes a javascript value and validates it against a specific schema. It simply returns `true` if the value is valid and `false` otherwise.\r\nIn addition, if the validators schema had any other schemas assigned to it as properties (this will be the case for almost all top-level json-schemas), it has a validator function for each of those sub-schemas assigned to it as a property (as functions are objects in js).\r\n\r\n##### Example #####\r\n###### Schema ######\r\n\tvar schema = {\r\n\t\t\"type\":\"object\",\r\n\r\n\t\t\"name\": {\r\n\t\t\t\"type\": \"string\"\r\n\t\t},\r\n\r\n\t\t\"age\" :{\r\n\t\t\t\"type\": \"integer\",\r\n\t\t\t\"maximum\": 125\r\n\t\t}\r\n\t}\r\n\r\n###### Parsing ######\r\n\tvar parsed = parse(schema)\r\n\r\n###### Functions ######\r\n* `parsed(value)`: Returns true if `value` is an object\r\n* `parsed.name(value)`: Returns true if `value` is a string\r\n* `parsed.age(value)`: Returns true if `value` is an integer larger then 125\r\n\r\n#### RSON-RPC Methods ####\r\nIf a json-schema describes a JSON-RPC method, we do not create a validator function. Instead we generate a wrapper for that method. This wrapper takes arguments either by order, or as one object by name. In addition it takes a callback to be called once a response is received. This callback always has to be the last argument and may be omitted. Remember that for the callback to be called, you still have to pass all response from your server into `jrpc.handleResponse()`.\r\n\r\n##### Example #####\r\n###### Schema ######\r\n\tvar schema = {\r\n\t   \"type\": \"method\",\r\n\t   \"returns\": \"number\",\r\n\t   \"params\": [\r\n\t\t\t{\r\n\t\t\t\t\"type\": \"number\",\r\n\t\t\t\t\"name\": \"square\",\r\n\t\t\t\t\"required\": true,\r\n\t\t\t\t\"minimum\": 0,\r\n\t\t\t\t\"description\": \"Number to find the square root of\"\r\n\t        },\r\n\t        {\r\n\t        \t\"type\": \"number\",\r\n\t        \t\"name\": \"nth\",\r\n\t        \t\"default\": 2\r\n\t        \t\"minimum\": 2,\r\n\t        \t\"description\": \"The degree of the root\" \r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\r\n###### Parsing ######\r\n\tvar root = parse(schema)\r\n\r\n###### Use Cases ######\r\n\troot(15625, 3, handleResult);\r\n\troot(25, handleResult);\r\n\troot({nth: 3, square: 15625}, handleResult)",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/Paulavery/jrpc-schema/issues"
  },
  "_id": "jrpc-schema@0.0.3",
  "dist": {
    "shasum": "f2e3078c6a2200c4366b0d31208c609264b6d800",
    "tarball": "http://registry.npmjs.org/jrpc-schema/-/jrpc-schema-0.0.3.tgz"
  },
  "_from": "jrpc-schema@0.0.3",
  "_npmVersion": "1.3.8",
  "_npmUser": {
    "name": "paulavery",
    "email": "flo.albertz@gmail.com"
  },
  "maintainers": [
    {
      "name": "paulavery",
      "email": "flo.albertz@gmail.com"
    }
  ],
  "directories": {},
  "_shasum": "f2e3078c6a2200c4366b0d31208c609264b6d800",
  "_resolved": "https://registry.npmjs.org/jrpc-schema/-/jrpc-schema-0.0.3.tgz"
}
